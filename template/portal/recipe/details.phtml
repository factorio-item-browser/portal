<?php
use FactorioItemBrowser\Api\Client\Entity\Recipe;

/* @var Recipe[] $recipes */
$recipes = $this->recipes;

$firstRecipe = reset($recipes);

$this->headTitle()->prepend($firstRecipe->getLabel() ?: $firstRecipe->getName());

foreach ($recipes as $recipe) { ?>
    <section class="recipe-details-container <?php echo $this->escapeHtmlAttr($recipe->getMode()); ?>">
        <?php echo $this->partial('portal::recipe/partial/head', ['recipe' => $recipe]); ?>

        <div class="recipe-details">
            <?php echo $this->partial('portal::recipe/partial/ingredients', ['recipe' => $recipe]); ?>
            <div class="separator"></div>
            <?php echo $this->partial('portal::recipe/partial/products', ['recipe' => $recipe]); ?>
        </div>
    </section>
<?php }

if (count($this->machines) > 0) {
    echo $this->render('portal::recipe/partial/machines');
}